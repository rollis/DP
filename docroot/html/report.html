<head>

    <style type="text/css">
        @import '../css/venuecell.css';
    </style>
    <script src="../js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="../js/mustache.js"></script>

    <!-- // <script src="../js/three.js"></script> -->
    <!-- // <script src="../js/Color.js"></script> -->
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBhzZJIOGZWs2Jes80c5Oxy6zA-kqhuEQQ"></script>
    <!-- // <script src="../js/map.js"></script> -->
    <script>
        var map = new Map($("#map")[0]);
    </script>

</head>
<body>
    <script>
        // this should be replaced.
        var data = {
          "businesses": [
          {
              "categories": [
              [
              "Local Flavor",
              "localflavor"
              ],
              [
              "Mass Media",
              "massmedia"
              ]
              ],
              "display_phone": "+1-415-908-3801",
              "id": "yelp-san-francisco",
              "is_claimed": true,
              "is_closed": false,
              "image_url": "http://s3-media2.ak.yelpcdn.com/bphoto/7DIHu8a0AHhw-BffrDIxPA/ms.jpg",
              "location": {
                "address": [
                "140 New Montgomery St"
                ],
                "city": "San Francisco",
                "country_code": "US",
                "cross_streets": "3rd St & Opera Aly",
                "display_address": [
                "140 New Montgomery St",
                "(b/t Natoma St & Minna St)",
                "SOMA",
                "San Francisco, CA 94105"
                ],
                "neighborhoods": [
                "SOMA"
                ],
                "postal_code": "94105",
                "state_code": "CA"
            },
            "mobile_url": "http://m.yelp.com/biz/4kMBvIEWPxWkWKFN__8SxQ",
            "name": "Yelp",
            "phone": "4159083801",
            "rating_img_url": "http://media1.ak.yelpcdn.com/static/201012161694360749/img/ico/stars/stars_3.png",
            "rating_img_url_large": "http://media3.ak.yelpcdn.com/static/201012161053250406/img/ico/stars/stars_large_3.png",
            "rating_img_url_small": "http://media1.ak.yelpcdn.com/static/201012162337205794/img/ico/stars/stars_small_3.png",
            "review_count": 3347,
            "snippet_image_url": "http://s3-media2.ak.yelpcdn.com/photo/LjzacUeK_71tm2zPALcj1Q/ms.jpg",
            "snippet_text": "Sometimes we ask questions without reading an email thoroughly as many of us did for the last event.  In honor of Yelp, the many questions they kindly...",
            "url": "http://www.yelp.com/biz/yelp-san-francisco",
            "menu_provider": "yelp",
            "menu_date_updated": 1317414369
        },
        {
          "categories": [
          [
          "Local Flavor",
          "localflavor"
          ],
          [
          "Mass Media",
          "massmedia"
          ]
          ],
          "display_phone": "+1-415-908-3801",
          "id": "yelp-san-francisco",
          "is_claimed": true,
          "is_closed": false,
          "image_url": "http://s3-media2.ak.yelpcdn.com/bphoto/7DIHu8a0AHhw-BffrDIxPA/ms.jpg",
          "location": {
            "address": [
            "140 New Montgomery St"
            ],
            "city": "San Francisco",
            "country_code": "US",
            "cross_streets": "3rd St & Opera Aly",
            "display_address": [
            "140 New Montgomery St",
            "(b/t Natoma St & Minna St)",
            "SOMA",
            "San Francisco, CA 94105"
            ],
            "neighborhoods": [
            "SOMA"
            ],
            "postal_code": "94105",
            "state_code": "CA"
        },
        "mobile_url": "http://m.yelp.com/biz/4kMBvIEWPxWkWKFN__8SxQ",
        "name": "Yelp",
        "phone": "4159083801",
        "rating_img_url": "http://media1.ak.yelpcdn.com/static/201012161694360749/img/ico/stars/stars_3.png",
        "rating_img_url_large": "http://media3.ak.yelpcdn.com/static/201012161053250406/img/ico/stars/stars_large_3.png",
        "rating_img_url_small": "http://media1.ak.yelpcdn.com/static/201012162337205794/img/ico/stars/stars_small_3.png",
        "review_count": 3347,
        "snippet_image_url": "http://s3-media2.ak.yelpcdn.com/photo/LjzacUeK_71tm2zPALcj1Q/ms.jpg",
        "snippet_text": "Sometimes we ask questions without reading an email thoroughly as many of us did for the last event.  In honor of Yelp, the many questions they kindly...",
        "url": "http://www.yelp.com/biz/yelp-san-francisco",
        "menu_provider": "yelp",
        "menu_date_updated": 1317414369
    }
    ],
    "region": {
        "center": {
          "latitude": 37.786138600000001,
          "longitude": -122.40262130000001
      },
      "span": {
          "latitude_delta": 0.0,
          "longitude_delta": 0.0
      }
  },
  "total": 10651
}


$(document).ready(function() {
    console.log("ready!");
    // // http://stackoverflow.com/questions/18281183/jquery-cross-domain-request-to-get-json-response-without-callback
    // // http://stackoverflow.com/questions/24528211/refused-to-execute-script-from-because-its-mime-type-application-json-is
    // $.ajax({
    //     url: 'http://172.31.178.185:8080/PlanningMap-portlet/sample.json',
    //     // dataType: 'jsonp',
    //     // jsonp: 'callback',
    //     success: 'render'
    //     // crossDomain: true,
    //     // jsonpCallback: 'render'
    // });
    $.getJSON('sample.json',render);

});


function render(jsondata) {
    if (!jsondata.Error) {
        var template = "";
        $.get('venuecell.mustache', function(template) {
          $('#venue-list').html(Mustache.render(template,jsondata));
        }); 
    } else {
        alert(json.Message);
    }
};

</script>

<div id="map">
</div>

<div class="venue-list-wrapper">
    <ul id="venue-list">
    </ul>
</div>
<div class="venue-detail-wrapper">

</div>

<div>
    
</div>

</body>